(this.webpackJsonpmealchak=this.webpackJsonpmealchak||[]).push([[9],{365:function(e,t,n){},394:function(e,t,n){"use strict";n.r(t);var a,s=n(11),o=n(198),r=n.n(o),c=n(8),i=n(200),u=n(159),d=n(1),b=n.n(d),l=n(22),j=n(15),h=n(14),O=n(47),f=n.n(O),m=n(329),g=n.n(m),v=n(336),p=n.n(v),y=n(10),w=n(57),x=n(154),k=n(2),_=n(46),S=n(23),N=n(20),C=n(4),I=n(6),A=(n(365),n(366)),J=n(0),M=y.c.div(a||(a=Object(s.a)(["\n  position: absolute;\n  width: 30rem;\n  height: 100vh;\n  z-index: 101;\n  text-align: right;\n  display: ",";\n  touch-action: none;\n"])),(function(e){return e.isOpen?"auto":"none"}));t.default=function(e){N.a.border;var t,n,a,s,o,d=b.a.useState(!1),O=Object(u.a)(d,2),m=O[0],v=O[1],y=function(){v(!m)},R=new p.a("https://gorokke.shop/chatting"),B=g.a.over(R),L=Object(l.d)(),E=null===(t=e.history.location.state)||void 0===t?void 0:t.roomName,K=null===(n=e.history.location.state)||void 0===n?void 0:n.room_id,T=null===(a=e.history.location.state)||void 0===a?void 0:a.post_id,Y=null===(s=e.history.location.state)||void 0===s?void 0:s.own_user_id,F=null===(o=e.history.location.state)||void 0===o?void 0:o.order_time,H=Object(l.e)((function(e){var t;return null===(t=e.chat)||void 0===t?void 0:t.userInList})),D=Object(l.e)((function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.user_nickname})),X=Object(l.e)((function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.user_profile})),q=Object(l.e)((function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.user_id}));Object(l.e)((function(e){return e.chat.messageText}));b.a.useEffect((function(){Object(C.a)("chat props",e),Object(C.a)("chat sender info",X),Object(C.a)("chat user_in_chat",H),L(S.a.loginCheck()),j.b&&(L(_.a.moveChatRoom(K,E,T,Y,F)),L(_.a.getChatMessagesAX()),L(_.a.getChatUserAX(K)))}),[]),b.a.useEffect((function(){return K?(z(),function(){U()}):I.a.sweetOK("\uc798\ubabb\ub41c \uc811\uadfc\uc785\ub2c8\ub2e4.","\ud648\uc73c\ub85c \ub3cc\uc544\uac11\ub2c8\ub2e4.","\ucc44\ud305 \uc2e0\uccad \ud6c4 \ucc44\ud305\ud0ed\uc744 \uc774\uc6a9\ud574\uc8fc\uc138\uc694.","\ud655\uc778").then((function(e){return h.b.replace("/home")}))}),[K||null]);var z=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,B.debug=null,e.next=4,B.connect({token:j.b},(function(){B.subscribe("/sub/api/chat/rooms/".concat(K),(function(e){var t=JSON.parse(e.body);Object(C.a)("\uad6c\ub3c5\ud6c4 \uc0c8\ub85c\uc6b4 \uba54\uc138\uc9c0 data",t);var n=f()().format("YYYY-MM-DD HH:mm:ss");L(_.a.getMessages(Object(c.a)(Object(c.a)({},t),{},{createdAt:n})))}),{token:j.b})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Object(C.a)("\uc18c\ucf13 \ucee4\ub125\ud2b8 \uc5d0\ub7ec",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),U=function(){try{B.debug=null,B.disconnect((function(){B.unsubscribe("sub-0"),clearTimeout(G)}),{token:j.b})}catch(e){Object(C.a)("\uc5f0\uacb0 \uad6c\ub3c5 \ud574\uccb4 \uc5d0\ub7ec",e)}},G=function e(t,n){setTimeout((function(){1===t.ws.readyState?n():e(t,n)}),.1)};return K?Object(J.jsxs)(b.a.Fragment,{children:[Object(J.jsx)(x.n,Object(c.a)({},e)),Object(J.jsx)(k.b,{minHeight:"100vh",margin:"0 auto",bg:"#7B6E62",children:Object(J.jsxs)(k.b,{shape:"container",align_items:"flex-end",children:[Object(J.jsx)(M,{isOpen:m,children:Object(J.jsx)(A.a,{transitions:!0,touch:!0,pullRight:!0,sidebar:Object(J.jsx)(x.q,{own_user_id:Y,order_time:F,roomName:E,_onClick:y,post_id:T,sendBen:function(e,t){try{j.b||I.a.sweetNeedLogin();var n={type:"BAN",roomId:K,senderId:q,message:e};G(B,(function(){B.debug=null,B.send("/pub/message",{token:j.b},JSON.stringify(n)),Object(C.a)("\uac15\ud1f4 \uba54\uc138\uc9c0 \uc0c1\ud0dc",B.ws.readyState),I.a.sweetOK("\ud1f4\uc7a5 \ucc98\ub9ac\uac00 \uc644\ub8cc\ub418\uc5c8\uc5b4\uc694","".concat(t,"\ub2d8\uc744"),"\ucc44\ud305\uc5d0\uc11c \ub0b4\ubcf4\ub0c8\uc5b4\uc694.","")}))}catch(a){I.a.sweetConfirmReload("\ud1f4\uc7a5 \ucc98\ub9ac \uc2e4\ud328",["\ucc44\ud305\uc5d0\uc11c \ub0b4\ubcf4\ub0b4\ub294 \ub370 \uc2e4\ud328\ud588\uc5b4\uc694.","\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."],""),Object(C.a)("message \uc18c\ucf13 \ud568\uc218 \uc5d0\ub7ec",a),Object(C.a)("\uac15\ud1f4 \uba54\uc138\uc9c0 \uc0c1\ud0dc",B.ws.readyState)}},sendBreak:function(){try{if(!j.b)return I.a.sweetNeedLogin();var e={type:"BREAK",roomId:K,senderId:q,message:"\ubc29\uc7a5\uc774 \uc0ad\uc81c\ud55c \ucc44\ud305\ubc29\uc774\uc5d0\uc694."};G(B,(function(){B.debug=null,B.send("/pub/message",{token:j.b},JSON.stringify(e)),Object(C.a)("\ubc29\ud3ed \uba54\uc138\uc9c0 \uc0c1\ud0dc",B.ws.readyState)}))}catch(t){I.a.sweetConfirmReload("\ubc29 \uc0ad\uc81c \uc2e4\ud328",["\ubc29 \uc0ad\uc81c \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."],""),Object(C.a)("message \uc18c\ucf13 \ud568\uc218 \uc5d0\ub7ec",t),Object(C.a)("\ubc29\ud3ed \uba54\uc138\uc9c0 \uc0c1\ud0dc",B.ws.readyState)}}}),open:m,onSetOpen:v,sidebarClassName:m?"side-nav active":"side-nav",styles:{content:{text_align:"right"}},children:Object(J.jsx)(J.Fragment,{})})}),Object(J.jsx)(x.h,Object(c.a)(Object(c.a)({},e),{},{shape:"\ucc44\ud305\ubc29",roomName:E,_onClick:y,children:E})),Object(J.jsx)(x.k,{}),Object(J.jsx)(x.l,{sendMessage:function(e){try{j.b||I.a.sweetNeedLogin();var t={type:"TALK",roomId:K,sender:D,senderImg:X,senderId:q,message:e};if(""===e||" "===e)return I.a.sweetConfirmReload("\uba54\uc138\uc9c0\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",["\ubb34\uc5c7\uc744 \uba39\uc744\uc9c0, \uc5b4\ub514\uc11c \ubc30\ub2ec\uc2dc\ud0ac\uc9c0","\uc774\uc57c\uae30\ud574\ubd10\uc694 :)"],"");G(B,(function(){B.debug=null,B.send("/pub/message",{token:j.b},JSON.stringify(t)),Object(C.a)("\uba54\uc138\uc9c0\ubcf4\ub0b4\uae30 \uc0c1\ud0dc",B.ws.readyState),L(_.a.writeMessage(""))}))}catch(n){Object(C.a)("message \uc18c\ucf13 \ud568\uc218 \uc5d0\ub7ec",n),Object(C.a)("\uba54\uc138\uc9c0\ubcf4\ub0b4\uae30 \uc0c1\ud0dc",B.ws.readyState)}}})]})})]}):Object(J.jsx)(b.a.Fragment,{children:Object(J.jsx)(w.a,{})})}}}]);
//# sourceMappingURL=9.d56a459b.chunk.js.map